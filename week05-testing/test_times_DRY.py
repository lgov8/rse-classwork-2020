from times import time_range, compute_overlap_time
import pytest
@pytest.mark.parametrize("range1,range2,expected",[
    
    (
        time_range("2010-01-12 10:00:00", "2010-01-12 12:00:00"),
        time_range("2010-01-12 10:30:00", "2010-01-12 10:45:00", 2, 60), 
        [('2010-01-12 10:30:00', '2010-01-12 10:37:00'), ('2010-01-12 10:38:00', '2010-01-12 10:45:00')]
    ),
                          
    (
        time_range("2019-01-10 10:00:00", "2019-01-10 11:00:00"),
        time_range("2019-01-10 11:20:00", "2019-01-10 11:30:00"),
        []
    ),
                          
    (
        time_range("2010-01-12 10:00:00", "2010-01-12 13:00:00",2,60),
        time_range("2010-01-12 10:30:00", "2010-01-12 11:35:00", 2, 60),
        [('2010-01-12 10:30:00', '2010-01-12 11:02:00'), ('2010-01-12 11:03:00', '2010-01-12 11:29:30'), ('2010-01-12 11:30:30', '2010-01-12 11:35:00')]
    ),
                          
    (
        time_range("2010-01-12 10:00:00", "2010-01-12 13:00:00"),
        time_range("2010-01-12 13:00:00", "2010-01-12 14:00:00"),
        []
    )
])



def test_eval(range1,range2, expected):
    assert compute_overlap_time(range1,range2) == expected

def test_starttime_before_endtime():
    with pytest.raises(ValueError):
        time_range("2010-01-12 11:00:00","2010-01-12 10:00:00")